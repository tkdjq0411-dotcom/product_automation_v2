<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>개인 코드</title>
</head>
<body>
<h2>개인 코드 입력</h2>
<input id="code" placeholder="개인 코드">
<button onclick="verify()">확인</button>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="/static/common.js"></script>
<script>
initSupabase();

async function verify() {
  const code = document.getElementById("code").value;
  const res = await apiFetch("/api/verify-code", {
    method: "POST",
    body: JSON.stringify({ access_code: code })
  });

  if (res.role === "admin") location.href = "/admin";
  else location.href = "/user";
}
</script>
</body>
</html>
