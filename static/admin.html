<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
<body>
<h2>관리자 - 개인 코드 발급</h2>

<input id="uid" placeholder="user_id">
<input id="code" placeholder="개인 코드">
<select id="role">
  <option value="user">user</option>
  <option value="admin">admin</option>
</select>

<button onclick="createCode()">발급</button>
<button onclick="logout()">로그아웃</button>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="/static/common.js"></script>
<script>
initSupabase();

async function createCode() {
  await apiFetch("/api/admin/create-code", {
    method: "POST",
    body: JSON.stringify({
      user_id: uid.value,
      code: code.value,
      role: role.value
    })
  });
  alert("발급 완료");
}
</script>
</body>
</html>
